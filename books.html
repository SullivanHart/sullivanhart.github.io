<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Books Archive</title>
    <link rel="stylesheet" href="/css/aboutStylesheet.css" type="text/css" />
    <style>
      #password-container {
        margin: 20px auto;
        max-width: 600px;
        padding: 20px;
        background-color: #e0dcc5; /* Match background color */
        border-radius: 8px;
        color: #3a5a40; /* Match text color */
      }
      #password-container h2 {
        color: #3a5a40; /* Match header color */
        text-align: center;
        margin: 0; /* Remove outline around header */
      }
      #password-container input,
      #password-container button {
        display: block;
        width: 100%;
        padding: 10px;
        margin-top: 10px;
        margin-bottom: 10px;
        border: 1px solid #757d5f; /* Match border color */
        border-radius: 4px;
        color: #3a5a40; /* Match text color */
        outline: none; /* Remove outline */
      }
      #password-container label {
        display: block;
        width: 100%;
        padding-top: 10px;
        padding-bottom: 10px;
        margin-bottom: 10px;
        color: #3a5a40; /* Match text color */
        outline: none; /* Remove outline */
        border: none; /* Ensure no border */
      }
      #password-container button {
        background-color: #757d5f; /* Match button color */
        color: #e0dcc5; /* Match button text color */
        border: none;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      #password-container button:hover {
        background-color: #3a5a40; /* Match button hover color */
      }
    </style>
    <script
      type="text/javascript"
      src="/javascript/typekit.js"
      async
      onload="try { window.Typekit.load(); } catch (e) { console.warn('Typekit not loaded.'); }"
    ></script>
  </head>
  <body>
    <div id="password-container">
      <h2>Enter Password to View Books</h2>
      <input type="password" id="password" placeholder="Password" />
      <button onclick="unlock()">Unlock</button>
      <p id="error-message" style="color: red; display: none">
        Incorrect password. Please try again.
      </p>
    </div>

    <div id="content" style="display: none"></div>

    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js"></script>
    <script src="books_secret.enc.js"></script>
    <script>
      async function unlock() {
        const pass = document.getElementById("password").value;
        const decrypted = decryptAES(encryptedHTML, pass);

        if (decrypted.startsWith("<")) {
          document.getElementById("password-container").style.display = "none";
          const content = document.getElementById("content");
          content.style.display = "block";
          content.innerHTML = decrypted;
        } else {
          document.getElementById("error-message").style.display = "block";
        }
      }

      function decryptAES(encryptedBase64, passphrase) {
        try {
          const bytes = CryptoJS.AES.decrypt(encryptedBase64, passphrase);
          return bytes.toString(CryptoJS.enc.Utf8);
        } catch (e) {
          return "";
        }
      }
    </script>
  </body>
</html>
